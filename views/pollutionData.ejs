<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="stylesheets/basic.css">
    <link rel="stylesheet" href="stylesheets/pollutionData.css">
    <title>Pollution Data for ZIP Code <%= dataList.zipCode %></title>
</head>
<body>
  <nav id="mainNav" class="navbar navbar-expand-sm navbar-light fixed-top">
    <div class="container">
      <ul class="navbar-nav mx-auto me-auto mb-2 mb-sm-0 d-flex fixed-top">
        <li class="nav-item active"><a href="/" class="nav-link">HOME PAGE</a></li>
        <li class="nav-item active"><a href="/#third_bg" class="nav-link">VIEW MAP</a></li>
        <li class="nav-item active"><a href="/articles" class="nav-link">ARTICLES</a></li>
        <li class="nav-item active mx-3"><div class="nav-title">Green Speak</div></li>
        <li class="nav-item active"><a href="/opportunities" class="nav-link">OPPORTUNITIES</a></li>
        <li class="nav-item active"><a href="/getinvolved" class="nav-link">GET INVOLVED</a></li>
        <li class="nav-item active"><a href="/gallery" class="nav-link">GALLERY</a></li>
      </ul>
    </div>
  </nav>

  <div class="masonry-grid">
    <div class="card">
        <div class="card-header bg-success text-white">Air Quality</div>
        <div class="card-body d-flex">
            <div class="flex-grow-1">
                <p>Air Quality Index: <%= dataList.airQualityData.index.value %></p>
                <p>PM2.5: <%= dataList.airQualityData.pollutants.pm2_5 %> µg/m³</p>
                <p>PM10: <%= dataList.airQualityData.pollutants.pm10 %> µg/m³</p>
                <p>Ozone: <%= dataList.airQualityData.pollutants.ozone %> µg/m³</p>
            </div>
            <div class="ms-3" style="width: 230px;">
                <iframe title="widget" height="340" src="https://widget.airnow.gov/aq-dial-widget/?latitude=<%=latitude%>&longitude=<%=longitude%>" style="border: none; border-radius: 25px; background-color: green" width="100%"></iframe>
            </div>
        </div>
    </div>

    <div class="card">
      <div class="card-header bg-secondary text-white">Air Quality Map</div>
      <div class="card-body">
          <iframe title="map" height= 100% width= 100% src="https://gispub.epa.gov/airnow/?monitors=ozonepm&basemap=topographic&contours=none&xmin=-8300000&xmax=-8250000&ymin=4950000&ymax=5050000" style="border: none; border-radius: 25px;"></iframe>
      </div>
    </div>

    <div class="card">
        <div class="card-header bg-info text-white">Noise Data</div>
        <div class="card-body">
            <p>No noise pollution information found for zip code: <%= dataList.zipCode %>.</p>
        </div>
    </div>
    <div class="card">
        <div class="card-header bg-warning text-white">Pollen Data</div>
        <div class="card-body">
            <p>Pollen Index: <%= dataList.pollenData.index.value %> dB</p>
            <p>Main Pollen Pollutants: <%= dataList.pollenData.index.main_pollutants %> dB</p>
        </div>
    </div>
    <div class="card">
        <div class="card-header bg-danger text-white">UV Index</div>
        <div class="card-body">
            <p>UV Index: <%= dataList.uvData.index.value %></p>
            <p>So?: <%= dataList.uvData.health_recommendations.all %></p>
        </div>
    </div>
    <div class="card">
        <div class="card-header bg-primary text-white">Water Quality</div>
        <div class="card-body">
            <p>No water quality information found for zip code: <%= dataList.zipCode %>.</p>
        </div>
    </div>
  </div>


  <script>
    window.addEventListener('scroll', handleScroll);
    handleScroll();

    function handleScroll() {
        let navbar = document.getElementById('mainNav');
        let navTitle = document.querySelector('.nav-title');

        if (window.scrollY > 20) {  
            navbar.classList.add('bg-scrolled');
            navbar.classList.remove('bg-transparent');
            navTitle.classList.add('title-scrolled');
        } else {
            navbar.classList.add('bg-transparent');
            navbar.classList.remove('bg-scrolled');
            navTitle.classList.remove('title-scrolled');
        }
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>

